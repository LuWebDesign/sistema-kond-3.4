<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gesti√≥n de Producci√≥n</title>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Tipograf√≠a -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Estilos -->
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/topbar.css">
  <link rel="stylesheet" href="css/sections.css">
  <link rel="stylesheet" href="css/cards.css">
  <link rel="stylesheet" href="css/calendar.css">
  <link rel="stylesheet" href="css/modals.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/add-product.css">
  <link rel="stylesheet" href="css/sidebar.css">
  <link rel="stylesheet" href="css/pedidos-catalogo.css">
  <link rel="stylesheet" href="css/marketing.css">
  <link rel="stylesheet" href="css/theme.css">
  <link rel="stylesheet" href="css/notifications.css">
  <style>
    /* Estilos espec√≠ficos para Mi Cuenta */
    #btnCerrarSesion {
      background: transparent;
      color: var(--text-muted);
      border: 1px solid var(--border-input);
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    #btnCerrarSesion:hover {
      background: var(--bg-hover);
      color: var(--text-secondary);
      border-color: var(--accent-primary);
    }
    
    /* Animaciones para di√°logos personalizados */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideInFromTop {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    /* Estilos para las tarjetas de Mi Cuenta */
    .account-card,
    .system-stats,
    .activity-feed,
    .quick-settings {
      background: var(--bg-card) !important;
      border: 1px solid var(--border-color) !important;
    }
    
    .account-card h3,
    .system-stats h3,
    .activity-feed h3,
    .quick-settings h3 {
      color: var(--text-primary) !important;
    }
    
    .account-card p,
    .system-stats div,
    .activity-feed div,
    .quick-settings span {
      color: var(--text-tertiary) !important;
    }
    
    /* Estad√≠sticas coloreadas */
    #totalProductos { color: #3b82f6 !important; }
    #totalPedidos { color: #10b981 !important; }
    #totalClientes { color: #f59e0b !important; }
    #balanceTotal { color: #8b5cf6 !important; }
    
    /* Botones de configuraci√≥n */
    .quick-settings button {
      background: var(--bg-input) !important;
      color: var(--text-secondary) !important;
      border: 1px solid var(--border-input) !important;
    }
    
    .quick-settings button:hover {
      background: var(--bg-hover) !important;
    }
    
    .quick-settings .btn-danger {
      background: #dc2626 !important;
      color: white !important;
    }
    
    /* Actividad reciente */
    .activity-feed .empty-state,
    .activity-feed .error-state {
      color: var(--text-muted) !important;
    }
    
    /* Checkboxes y controles */
    .quick-settings input[type="checkbox"] {
      accent-color: var(--accent-blue);
    }
    
    /* Botones del topbar */
    #btnMiCuenta:hover {
      background: var(--bg-hover);
      color: var(--accent-blue);
    }
    
    #btnCerrarSesionTopbar:hover {
      background: var(--bg-hover);
      color: #ef4444;
    }
    
    #btnMiCuenta.active {
      background: var(--accent-blue);
      color: white;
    }
    
    /* Botones verticales del topbar */
    .icon-btn-vertical {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      padding: 6px 8px;
      background: transparent;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      color: var(--text-tertiary);
      min-width: 60px;
    }
    
    .icon-btn-vertical .icon {
      font-size: 16px;
      line-height: 1;
    }
    
    .icon-btn-vertical .label {
      font-size: 10px;
      font-weight: 500;
      line-height: 1;
      white-space: nowrap;
    }
    
    .icon-btn-vertical:hover {
      background: var(--bg-hover);
      color: var(--text-secondary);
    }
    
    #btnMiCuenta:hover {
      color: var(--accent-blue);
    }
    
    #btnCerrarSesionTopbar:hover {
      color: #ef4444;
    }
    
    #btnMiCuenta.active {
      background: var(--accent-blue);
      color: white;
    }
    
    #btnMiCuenta.active:hover {
      background: var(--accent-blue);
      color: white;
    }
  </style>
<body data-theme="dark">
  <!-- TOPBAR -->
  <header class="topbar">
    <div class="topbar-left">
      <div class="logo">KOND</div>
       <nav class="nav" role="navigation" aria-label="Navegaci√≥n principal">
         <!-- Top nav links -->
         <a href="#" onclick="openPublicCatalog()" class="nav-item" aria-label="Abrir Cat√°logo P√∫blico en nueva p√°gina">Cat√°logo P√∫blico</a>
         <a href="home.html" class="nav-item" target="_blank" rel="noopener noreferrer" aria-label="Abrir Home en nueva p√°gina">Home</a>
      </nav>
    </div>
    <div class="topbar-right">
      <button class="icon-btn" id="btnNotifications" title="Notificaciones" aria-haspopup="true" aria-expanded="false"><span>üîî</span></button>
      <div id="notificationsPanel" class="notifications-panel" aria-hidden="true"></div>
      <button class="icon-btn-vertical" id="btnMiCuenta" title="Mi Cuenta" data-section="mi-cuenta">
        <span class="icon">üë§</span>
        <span class="label">Mi Cuenta</span>
      </button>
      <button class="icon-btn theme-toggle" id="themeToggle" title="Cambiar tema">‚òÄÔ∏è</button>
      <button class="icon-btn-vertical" id="btnCerrarSesionTopbar" title="Cerrar Sesi√≥n">
        <span class="icon">üö™</span>
        <span class="label">Cerrar</span>
      </button>
    </div>
  </header>
  <!-- SIDEBAR -->
  <aside class="sidebar" aria-label="Barra lateral de navegaci√≥n">
    <div class="side-brand"></div>
    <nav class="side-nav">
      <button class="side-link" data-section="productos" aria-expanded="false">
        <span class="icon">üè∑Ô∏è</span>
        <span class="label">Productos</span>
      </button>
      <button class="side-link" data-section="metricas" aria-expanded="false">
        <span class="icon">üìä</span>
        <span class="label">M√©tricas</span>
      </button>
      <button class="side-link" data-section="calendario" aria-expanded="false">
        <span class="icon">üìÖ</span>
        <span class="label">Calendario</span>
      </button>
      <button class="side-link" data-section="finanzas" aria-expanded="false">
        <span class="icon">üí∞</span>
        <span class="label">Finanzas</span>
      </button>
      <button class="side-link" data-section="base-datos" aria-expanded="false">
        <span class="icon">üóÑÔ∏è</span>
        <span class="label">Base de datos</span>
      </button>
      <button class="side-link" data-section="pedidos" aria-expanded="false">
        <span class="icon">üì¶</span>
        <span class="label">Pedidos</span>
      </button>
      <button class="side-link" data-section="marketing" aria-expanded="false" title="Marketing">
        <span class="icon">üéØ</span>
        <span class="label">Marketing</span>
      </button>
      <button class="side-link" data-section="mi-cuenta" aria-expanded="false">
        <span class="icon">üë§</span>
        <span class="label">Mi cuenta</span>
      </button>
    </nav>
  </aside>
  <!-- CONTENIDO PRINCIPAL -->
  <main class="container main-with-sidebar" role="main">
    <!-- PRODUCTOS -->
    <section id="productos-section" class="section active" aria-labelledby="productos-title">
      <!-- Header con t√≠tulo y botones -->
      <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
        <div>
          <h1 class="section-title" id="productos-title" style="color: #cfcfcf; font-size:1.5rem; margin-bottom:5px;">Gesti√≥n de Productos</h1>
        </div>
        <div style="display: flex; gap: 10px;">
          <button id="toggleAddProductBtn" class="primary" style="background:#74b9ff; padding:10px 20px;">+ Agregar Producto</button>
          <button id="exportBtn" class="primary" style="background:#495057; padding:10px 20px;">Exportar</button>
        </div>
      </div>
      <!-- Barra de b√∫squeda y filtro -->
      <div style="display: flex; gap: 12px; margin-bottom: 20px; align-items: flex-end;">
        <div style="flex: 1;">
          <input type="text" id="searchInput" class="search-input" placeholder="Buscar productos" 
                 style="width:100%; padding:12px; border-radius:8px; border:2px solid #74b9ff; background:#252a32; color:#e0e0e0;">
          <p style="color:#999; font-size:0.85rem; margin-top:4px;">Busca por nombre, tipo o descripci√≥n</p>
        </div>
        <div style="min-width: 200px;">
          <label style="color:#cfcfcf; display:block; margin-bottom:6px; font-size:0.9rem;">Filtrar por tipo:</label>
          <select id="filterTipo" style="width:100%; padding:10px; border-radius:8px; border:1px solid #404040; background:#333; color:#e0e0e0;">
            <option value="">Todos los tipos</option>
            <option value="Venta">Venta</option>
            <option value="Presupuesto">Presupuesto</option>
            <option value="Stock">Stock</option>
                      <div class="info-block">
  <label class="label">
    <input type="checkbox" id="newPublicado" checked style="width: auto; margin-right: 8px;">
    Publicar en cat√°logo
  </label>
  <span style="font-size: 0.75rem; color: #999;">
    Visible para clientes en el cat√°logo p√∫blico
  </span>
</div>
          </select>
        </div>
      </div>
      <!-- Formulario Agregar Producto (oculto por defecto) -->
      <div class="add-product" id="addProductSection" style="display: none;" aria-labelledby="add-product-title">
        <h2 id="add-product-title" style="color:#74b9ff; margin-bottom:10px;">Agregar Producto</h2>
        <div class="info-blocks">
          <div class="info-block">
            <label class="label required" for="newNombre">Nombre:</label>
            <input type="text" id="newNombre" class="edit-input" placeholder="Nombre del producto" required aria-describedby="nombre-error" tabindex="1">
            <span id="nombre-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label required" for="newTipo">Tipo:</label>
            <select id="newTipo" class="edit-input" tabindex="2">
              <option value="Venta">Venta</option>
              <option value="Presupuesto">Presupuesto</option>
              <option value="Stock">Stock</option>
            </select>
          </div>
          <div class="info-block">
            <label class="label required" for="newMedidas">Medidas/Detalle:</label>
            <input type="text" id="newMedidas" class="edit-input" placeholder="Ej: 10x20 cm" required aria-describedby="medidas-error" tabindex="3">
            <span id="medidas-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label required" for="newTiempoUnitario">Tiempo de corte unitario (HH:MM:SS):</label>
            <input type="text" id="newTiempoUnitario" class="edit-input" placeholder="00:13:00" required aria-describedby="tiempo-error" tabindex="4">
            <span id="tiempo-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label required" for="newUnidades">Unidades producidas:</label>
            <input type="number" id="newUnidades" class="edit-input" placeholder="2" required aria-describedby="unidades-error" tabindex="5">
            <span id="unidades-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label" for="newUnidadesPorPlaca">Unidades por placa:</label>
            <input type="number" id="newUnidadesPorPlaca" class="edit-input" placeholder="10" tabindex="6">
            <span id="unidades-placa-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label" for="newUsoPlacas">Uso de placas:</label>
            <div class="input-group">
              <input type="number" id="newUsoPlacas" class="edit-input" placeholder="1" readonly tabindex="7">
              <button class="toggle-btn" id="toggleUsoPlacas">Manual</button>
            </div>
            <span id="uso-placas-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label" for="newEnsamble">Ensamble:</label>
            <select id="newEnsamble" class="edit-input" tabindex="8">
              <option value="Manual">Manual</option>
              <option value="Autom√°tico">Autom√°tico</option>
              <option value="Sin ensamble">Sin ensamble</option>
            </select>
          </div>
          <div class="info-block">
            <label class="label" for="newCostoPlaca">Costo placa ($):</label>
            <input type="number" id="newCostoPlaca" class="edit-input" placeholder="5000" tabindex="9">
            <span id="costo-placa-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label" for="newCostoMaterial">Costo de material ($):</label>
            <div class="input-group">
              <input type="number" id="newCostoMaterial" class="edit-input" placeholder="500" readonly tabindex="10">
              <button class="toggle-btn" id="toggleCostoMaterial">Manual</button>
            </div>
            <span id="costo-material-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label" for="newMargenMaterial">Margen sobre material (%):</label>
            <input type="number" id="newMargenMaterial" class="edit-input" placeholder="30" tabindex="11">
            <span id="margen-material-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label required" for="newPrecioUnitario">Precio unitario ($):</label>
            <div class="input-group">
              <input type="number" id="newPrecioUnitario" class="edit-input" placeholder="650" readonly aria-describedby="precio-error" tabindex="12">
              <button class="toggle-btn" id="togglePrecioUnitario">Manual</button>
            </div>
            <span id="precio-error" class="error-message"></span>
          </div>
          <div class="info-block">
            <label class="label" for="newTiempoTotal">Tiempo de corte total:</label>
            <input type="text" id="newTiempoTotal" class="edit-input" readonly tabindex="-1">
          </div>
          <div class="info-block">
            <label class="label" for="newPrecioPorMinuto">Precio por minuto:</label>
            <input type="text" id="newPrecioPorMinuto" class="edit-input" readonly tabindex="-1">
          </div>
        </div>
        <div class="card-right-container">
          <div class="card-right">
            <div id="imagePreview" class="image-placeholder">Sin imagen</div>
          </div>
          <div class="info-block">
            <label class="label" for="newImagen">Imagen:</label>
            <input type="file" id="newImagen" class="edit-input" accept="image/*" tabindex="13">
          </div>
<div class="info-block">
  <label class="label" for="newCategoriaSelect">Categor√≠a:</label>
  <div style="display: flex; gap: 8px; align-items: center;">
    <select id="newCategoriaSelect" class="edit-input" tabindex="14">
      <option value="">Selecciona o crea una categor√≠a</option>
      <option value="custom">+ Crear nueva...</option>
    </select>
    <input type="text" id="newCategoriaCustom" class="edit-input" placeholder="Nueva categor√≠a" style="display: none; width: 150px;" tabindex="15">
  </div>
  <span id="categoria-error" class="error-message"></span>
</div>

          <div class="action-buttons">
            <button id="clearBtn" class="primary" tabindex="14">Limpiar</button>
            <button id="addBtn" class="secondary" tabindex="15">Agregar Producto</button>
          </div>
        </div>
      </div>
      <!-- Contenedor de productos -->
      <div id="productosContainer" aria-live="polite"></div>
      <!-- Paginaci√≥n -->
      <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px;">
        <div class="pagination" role="navigation" aria-label="Paginaci√≥n productos">
          <button id="prevPage" class="nav-btn" aria-label="P√°gina anterior">Anterior</button>
          <span id="pageInfo">P√°gina 1 de 1</span>
          <button id="nextPage" class="nav-btn" aria-label="P√°gina siguiente">Siguiente</button>
        </div>
      </div>
    </section>
    <!-- MARKETING -->
    <section id="marketing-section" class="section mk-marketing-wrapper" hidden aria-labelledby="marketing-title">
      <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:16px; margin-bottom: 16px;">
        <div>
          <h1 id="marketing-title" class="section-title">Marketing</h1>
          <p class="section-sub">Gesti√≥n de Promociones y Cupones</p>
        </div>
      </div>

      <!-- Pesta√±as -->
      <div class="mk-tabs" style="display: flex; gap: 12px; margin-bottom: 20px; border-bottom: 2px solid #374151; padding-bottom: 12px;">
        <button id="btnTabPromos" class="mk-tab-btn active" style="padding: 10px 20px; background: none; border: none; color: #e5e7eb; font-weight: 600; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.2s; font-size: 0.95rem;">
          üéØ Promociones
        </button>
        <button id="btnTabCoupons" class="mk-tab-btn" style="padding: 10px 20px; background: none; border: none; color: #9ca3af; font-weight: 600; cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.2s; font-size: 0.95rem;">
          üé´ Cupones
        </button>
      </div>

      <!-- Toolbar con botones y b√∫squeda -->
      <div class="mk-toolbar" role="toolbar" aria-label="Acciones de marketing" style="display:flex; gap:8px; align-items:center; margin-bottom: 20px; justify-content: space-between;">
        <input id="mkSearchInput" type="search" class="search-input" placeholder="Buscar..." aria-label="Buscar" style="min-width:260px;">
        <div style="display: flex; gap: 8px;">
          <button id="btnNuevaPromo" class="primary" title="Crear promoci√≥n">+ Nueva promoci√≥n</button>
          <button id="btnNuevoCupon" class="primary" title="Crear cup√≥n" style="display: none;">+ Nuevo cup√≥n</button>
        </div>
      </div>

      <div id="mkPromosContainer" class="mk-promos" aria-live="polite"></div>

      <div id="mkEmptyState" class="mk-empty" style="text-align:center; background: rgba(31,41,55,.4); border: 1px dashed #374151; border-radius: 12px; padding: 28px;">
        <div style="font-size:44px; margin-bottom:8px;" aria-hidden="true">üí°</div>
        <h3 style="margin:4px 0 6px;">Sin promociones a√∫n</h3>
        <p style="color:#9ca3af; max-width:620px; margin:0 auto 12px;">
          Crea tu primera campa√±a, cup√≥n o descuento desde ‚ÄúNueva promoci√≥n‚Äù. Estamos preparando el asistente para ayudarte a configurarlo de forma √≥ptima.
        </p>
        <div style="display:flex; gap:8px; justify-content:center;">
            <button class="primary" id="btnEmptyNew">Crear promoci√≥n</button>
            <button class="secondary" disabled>Ver gu√≠a (pr√≥ximamente)</button>
        </div>
      </div>
    </section>
    
    <style>
      .mk-tab-btn.active {
        color: #60a5fa !important;
        border-bottom-color: #60a5fa !important;
      }
      .mk-tab-btn:hover {
        color: #e5e7eb !important;
      }
    </style>

    <!-- METRICAS -->
    <section id="metricas-section" class="section" hidden>
      <h1 class="section-title">M√©tricas y An√°lisis</h1>
      <p class="section-sub">Anal√≠ticas r√°pidas sobre tus productos.</p>
      <div class="metrics-container">
        <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap:14px;">
          <div class="metric-card">
            <h3 style="color:#b0b0b0; margin-bottom:8px;">Total de Productos</h3>
            <div id="totalProductos" style="font-size:20px; font-weight:700; color:#fff;">0</div>
          </div>
          <div class="metric-card">
            <h3 style="color:#b0b0b0; margin-bottom:8px;">Valor Total de Pedidos</h3>
            <div id="valorTotal" style="font-size:20px; font-weight:700; color:#fff;">$0</div>
          </div>
          <div class="metric-card">
            <h3 style="color:#b0b0b0; margin-bottom:8px;">Tiempo Total de Producci√≥n</h3>
            <div id="tiempoTotal" style="font-size:20px; font-weight:700; color:#fff;">00:00:00</div>
          </div>
          <div class="metric-card">
            <h3 style="color:#b0b0b0; margin-bottom:8px;">Precio Promedio por Minuto</h3>
            <div id="precioPromedio" style="font-size:20px; font-weight:700; color:#fff;">$0</div>
          </div>
        </div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-top:18px;">
          <div style="background:#2a2a2a; padding:12px; border-radius:10px;">
            <h3 style="color:#74b9ff; margin-bottom:8px;">Distribuci√≥n por Tipo</h3>
            <div id="tipoChartPlaceholder" style="min-height:160px;"><canvas id="tipoChartCanvas"></canvas></div>
          </div>
          <div style="background:#2a2a2a; padding:12px; border-radius:10px;">
            <h3 style="color:#74b9ff; margin-bottom:8px;">Productos m√°s rentables</h3>
            <div id="rentabilidadChartPlaceholder" style="min-height:160px;"><canvas id="rentabilidadChartCanvas"></canvas></div>
          </div>
        </div>
      </div>
    </section>
    <!-- CALENDARIO -->
    <section id="calendario-section" class="section" hidden>
      <h1 class="section-title">Calendario de Producci√≥n</h1>
      <p class="section-sub">Asigna productos a d√≠as del mes.</p>
      <div class="calendar-container">
        <div class="calendar-nav" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
          <button id="prevMonth" class="nav-btn">Mes Anterior</button>
          <div id="currentMonth" style="font-weight:700; color:#fff;"></div>
          <button id="nextMonth" class="nav-btn">Mes Siguiente</button>
        </div>
        <div class="calendar" style="display:grid; grid-template-columns: repeat(7, 1fr); gap:8px;">
          <!-- Celdas generadas por JS -->
        </div>
        <div class="monthly-totals" style="margin-top:12px; text-align:right;">
          <p>Total tiempo mes: <span id="monthTotalTime">00:00:00</span></p>
          <p>Total precio mes: <span id="monthTotalPrice">$0</span></p>
        </div>
      </div>
    </section>
    <!-- BASE DE DATOS -->
    <section id="base-datos-section" class="section" hidden>
      <h1 class="section-title">Base de datos</h1>
      <p class="section-sub">Listado completo de productos y atributos.</p>
      <div class="database-container">
        <table class="database-table db-table">
          <thead>
            <tr>
              <th class="db-th">ID</th>
              <th class="db-th">Nombre</th>
              <th class="db-th">Unid. x Placa</th>
              <th class="db-th">Uso Placas</th>
              <th class="db-th">Costo</th>
              <th class="db-th">Material</th>
              <th class="db-th">Dimensiones</th>
              <th class="db-th">Tiempo Unit.</th>
              <th class="db-th">Unidades</th>
              <th class="db-th">Costo Placa</th>
              <th class="db-th">Costo Material</th>
              <th class="db-th">Margen Material</th>
              <th class="db-th">Precio Unit.</th>
              <th class="db-th">Ensamble</th>
              <th class="db-th">Foto</th>
            </tr>
          </thead>
          <tbody id="databaseTableBody"></tbody>
        </table>
      </div>
    </section>

    <!-- FINANZAS -->
    <section id="finanzas-section" class="section" hidden>
      <h1 class="section-title">Finanzas</h1>
      <p class="section-sub">Gesti√≥n de ingresos y gastos</p>

      <div class="finanzas-container">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; gap:12px;">
          <div style="display:flex; gap:12px; align-items:center;">
            <div class="caja-resumen" style="text-align:left; min-width:300px;">
              <h3 style="margin:0; color:#cfcfcf;">Movimientos</h3>
              <div style="display:flex; gap:12px; margin-top:8px;">
                <div style="flex:1;">
                  <div class="sub">Ingresos</div>
                  <div id="movIngresos" class="value" style="color:#4CAF50;">$0</div>
                </div>
                <div style="flex:1;">
                  <div class="sub">Egresos</div>
                  <div id="movEgresos" class="value" style="color:#e53935;">$0</div>
                </div>
              </div>
              <div style="margin-top:10px;">
                <div class="sub">Balance Total</div>
                <div id="finanzasBalance" class="value" style="color:#4CAF50; margin-top:6px;">$0</div>
              </div>
              <div style="margin-top:8px;">
                <div class="sub">Equilibrio Hoy</div>
                <div id="equilibrioDia" class="value" style="color:#0984e3; margin-top:6px;">$0</div>
              </div>
            </div>
          </div>
          <div style="display:flex; gap:12px; align-items:center;">
            <!-- Nueva tarjeta resumen caja -->
            <div id="cajaResumen" class="caja-resumen">
              <div class="label">Dinero disponible</div>
              <div id="dineroDisponible" class="value">$0</div>
              <div class="sub">Por cobrar</div>
              <div id="porCobrar" class="highlight">$0</div>
            </div>
            <button id="btnNuevoMovimiento" class="btn-secondary btn-small">+ Nuevo</button>
          </div>
        </div>

        <div id="finanzasForm" style="display:none; margin-bottom:16px; background:#252a32; padding:12px; border-radius:8px; border:1px solid #333;">
          <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
            <div>
              <label>Tipo</label>
              <div class="segmented-control" role="tablist" aria-label="Tipo movimiento">
                <button type="button" class="seg-btn" data-value="ingreso">Ingreso</button>
                <button type="button" class="seg-btn" data-value="egreso">Egreso</button>
                <button type="button" class="seg-btn" data-value="inversion">Inversi√≥n</button>
              </div>
              <input type="hidden" id="finanzasTipo" value="ingreso">
            </div>
            <div>
              <label>Monto ($)</label>
              <input type="number" id="finanzasMonto" class="form-input" />
            </div>
            <div>
              <label>Fecha</label>
              <input type="date" id="finanzasFecha" class="form-input" />
            </div>
            <div>
              <label>Hora</label>
              <input type="time" id="finanzasHora" class="form-input" />
            </div>
            <div>
              <label>Categor√≠a</label>
              <div style="display:flex; gap:8px; align-items:center;">
                <select id="finanzasCategoriaSelect" class="form-input">
                  <option value="">-- Sin categor√≠a --</option>
                </select>
                <button id="finanzasAddCategoriaBtn" class="btn-secondary btn-small" type="button">+</button>
                <button id="finanzasManageCategoriasBtn" class="btn-secondary btn-small" type="button">Gestionar</button>
                <input type="text" id="finanzasCategoriaCustom" class="form-input" placeholder="Nueva categor√≠a" style="display:none; width:180px;" />
                <button id="finanzasSaveCategoriaBtn" class="btn-primary btn-small" style="display:none;" type="button">Guardar</button>
              </div>
              <!-- Panel para gestionar categor√≠as: editar/eliminar -->
              <div id="finanzasCategoriasManager" style="display:none; margin-top:8px;">
                <!-- listado generado por JS -->
              </div>
            </div>
            <div>
              <label>M√©todo de pago</label>
              <select id="finanzasMetodoPago" class="form-input">
                <option value="efectivo">Efectivo</option>
                <option value="transferencia">Transferencia</option>
              </select>
            </div>
            <div style="grid-column:1 / -1;">
              <label>Descripci√≥n</label>
              <input type="text" id="finanzasDescripcion" class="form-input" />
            </div>
          </div>
          <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:8px;">
            <button id="finanzasCancelar" class="btn-secondary">Cancelar</button>
            <button id="finanzasGuardar" class="btn-primary">Guardar</button>
          </div>
        </div>

        <div id="finanzasList" class="catalogo-pedidos-grid">
          <!-- Movimientos generados por JS -->
        </div>

        <div id="finanzasEmpty" class="empty-state-pedidos" style="display:none; margin-top:12px;">
          <span class="empty-icon">üí∞</span>
          <h3>No hay movimientos registrados</h3>
          <p>Agrega ingresos o gastos para empezar a llevar el control.</p>
        </div>
      </div>

      <!-- REGISTROS: cierre de caja por d√≠a -->
      <div style="margin-top:20px;">
        <h3 style="color:#cfcfcf;">Registros (Cierre de caja)</h3>
        <div style="display:flex; gap:8px; align-items:center; margin-bottom:8px;">
          <input type="date" id="registrosFecha" class="form-input" />
          <button id="btnVerRegistros" class="btn-secondary btn-small">Ver</button>
          <button id="btnCerrarCaja" class="btn-primary btn-small">Cerrar caja</button>
        </div>
        <div id="registrosList" style="display:grid; gap:8px;">
          <!-- Lista de registros por d√≠a -->
        </div>
        <div id="registrosEmpty" class="empty-state-pedidos" style="display:none; margin-top:12px;">
          <span class="empty-icon">üóÇÔ∏è</span>
          <h4>No hay registros para la fecha seleccionada</h4>
        </div>
      </div>
    </section>

    
<!-- SECCI√ìN PEDIDOS CON PESTA√ëAS -->
<section id="pedidos-section" class="section" hidden>
  <h1 class="section-title">Gesti√≥n de Pedidos</h1>
  <p class="section-sub">Administra pedidos internos y de clientes</p>
  
  <!-- Pesta√±as de navegaci√≥n -->
  <div class="pedidos-tabs">
    <button class="pedido-tab active" data-tab="internos">
      <span class="tab-icon">üè≠</span>
      <span class="tab-label">Pedidos Internos</span>
      <span class="tab-badge" id="badgeInternos">0</span>
    </button>
    <button class="pedido-tab" data-tab="catalogo">
      <span class="tab-icon">üõí</span>
      <span class="tab-label">Pedidos Cat√°logo</span>
      <span class="tab-badge" id="badgeCatalogo">0</span>
    </button>
  </div>
  
  <!-- Contenido: Pedidos Internos (existente) -->
  <div id="tab-internos" class="pedidos-tab-content active">
    <div class="pedidos-header">
      <div class="pedidos-search">
        <input type="text" id="pedidosSearch" placeholder="Buscar pedidos internos...">
        <select id="pedidosFilter">
          <option value="">Todos</option>
          <option value="pendiente">Pendiente</option>
          <option value="en_proceso">En Proceso</option>
          <option value="completado">Completado</option>
        </select>
      </div>
      <div class="pedidos-actions">
        <button id="btnLimpiarDuplicados" class="btn-secondary" title="Limpiar pedidos duplicados">üßπ Limpiar duplicados</button>
      </div>
    </div>
    
    <div class="pedidos-container">
      <!-- Contenedor de tarjetas para Pedidos Internos (estilo Pedidos Cat√°logo) -->
      <div id="internosPedidosContainer" class="catalogo-pedidos-grid">
        <!-- Cards generadas por JS -->
      </div>
      <div id="internosEmpty" class="empty-state-pedidos" style="display:none;">
        <span class="empty-icon">üè≠</span>
        <h3>No hay pedidos internos</h3>
        <p>Aqu√≠ aparecer√°n los pedidos creados desde el panel interno.</p>
      </div>
    </div>
  </div>
  
  <!-- Modal Nuevo Pedido Interno -->
  <div id="pedidoModal" class="pedido-modal" style="display:none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Nuevo Pedido Interno</h3>
        <button class="close-modal">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Producto</label>
          <select id="pedidoProductoModal" class="form-select"></select>
        </div>
        <div class="form-group">
          <label>Cliente</label>
          <input type="text" id="pedidoClienteModal" class="form-input" placeholder="Nombre del cliente" />
        </div>
        <div class="form-group">
          <label>Fecha</label>
          <input type="date" id="pedidoFechaModal" class="form-input" />
        </div>
        <div class="form-group">
          <label>Estado</label>
          <select id="pedidoEstadoModal" class="form-select">
            <option value="pendiente">Pendiente</option>
            <option value="en_proceso">En Proceso</option>
            <option value="completado">Completado</option>
          </select>
        </div>
        <div class="form-group">
          <label>Cantidad</label>
          <input type="number" id="pedidoCantidadModal" class="form-input" min="1" value="1" />
        </div>
      </div>
      <div class="modal-actions">
        <button id="cancelPedidoBtn" class="btn-secondary">Cancelar</button>
        <button id="savePedidoBtn" class="btn-primary">Guardar Pedido</button>
      </div>
    </div>
  </div>
  
  <!-- Contenido: Pedidos Cat√°logo (NUEVO) -->
  <div id="tab-catalogo" class="pedidos-tab-content">
    <!-- Sub-pesta√±as dentro de Pedidos Cat√°logo -->
    <div class="catalogo-subtabs">
      <button class="catalogo-subtab active" data-subtab="pendientes">
        <span class="subtab-icon">‚è≥</span>
        <span class="subtab-label">Pedidos Pendientes</span>
        <span class="subtab-badge" id="badgePendientes">0</span>
      </button>
      <button class="catalogo-subtab" data-subtab="entregados">
        <span class="subtab-icon">üéâ</span>
        <span class="subtab-label">Pedidos Entregados</span>
        <span class="subtab-badge" id="badgeEntregados">0</span>
      </button>
    </div>
    
    <!-- Contenido: Pedidos Pendientes -->
    <div id="subtab-pendientes" class="catalogo-subtab-content active">
      <!-- Filtros y b√∫squeda para pedidos pendientes -->
      <div class="pedidos-header">
        <div class="pedidos-search">
          <input type="text" id="catalogoSearch" placeholder="Buscar por cliente, producto o ID...">
          <select id="catalogoFilterEstado">
            <option value="">Todos los estados</option>
            <option value="pendiente">‚è≥ Pendiente</option>
            <option value="confirmado">‚úÖ Confirmado</option>
            <option value="en_produccion">üîß En Producci√≥n</option>
            <option value="listo">üì¶ Listo para entrega</option>
          </select>
          <select id="catalogoFilterPago">
            <option value="">Todos los pagos</option>
            <option value="sin_se√±a">Sin se√±a</option>
            <option value="se√±a_pagada">Se√±a pagada</option>
            <option value="pagado_total">Pagado total</option>
          </select>
        </div>
        <div class="pedidos-stats">
          <div class="stat-card">
            <span class="stat-value" id="statPendientesPendientes">0</span>
            <span class="stat-label">Pendientes</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="statConfirmados">0</span>
            <span class="stat-label">Confirmados</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="statEnProduccion">0</span>
            <span class="stat-label">En Producci√≥n</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="statTotal">$0</span>
            <span class="stat-label">Total pendiente</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="statCobrado">$0</span>
            <span class="stat-label">Total cobrado</span>
          </div>
        </div>
      </div>
      
      <!-- Lista de pedidos pendientes del cat√°logo -->
      <div id="catalogoPedidosContainer" class="catalogo-pedidos-grid">
        <!-- Cards generadas por JS -->
      </div>
      
      <!-- Estado vac√≠o para pedidos pendientes -->
      <div id="catalogoEmpty" class="empty-state-pedidos" style="display:none;">
        <span class="empty-icon">üì¶</span>
        <h3>No hay pedidos pendientes</h3>
        <p>Los pedidos pendientes del cat√°logo aparecer√°n aqu√≠</p>
      </div>
    </div>
    
    <!-- Contenido: Pedidos Entregados -->
    <div id="subtab-entregados" class="catalogo-subtab-content">
      <!-- Filtros y b√∫squeda para pedidos entregados -->
      <div class="pedidos-header">
        <div class="pedidos-search">
          <input type="text" id="catalogoEntregadosSearch" placeholder="Buscar por cliente, producto o ID...">
          <select id="catalogoEntregadosFilterPago">
            <option value="">Todos los pagos</option>
            <option value="sin_se√±a">Sin se√±a</option>
            <option value="se√±a_pagada">Se√±a pagada</option>
            <option value="pagado_total">Pagado total</option>
          </select>
          <input type="date" id="catalogoEntregadosFecha" placeholder="Filtrar por fecha de entrega">
        </div>
        <div class="pedidos-stats">
          <div class="stat-card">
            <span class="stat-value" id="statEntregados">0</span>
            <span class="stat-label">Entregados</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="statEntregadosEsteMes">0</span>
            <span class="stat-label">Este mes</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="statTotalEntregado">$0</span>
            <span class="stat-label">Total entregado</span>
          </div>
        </div>
      </div>
      
      <!-- Lista de pedidos entregados del cat√°logo -->
      <div id="catalogoEntregadosContainer" class="catalogo-pedidos-grid">
        <!-- Cards generadas por JS -->
      </div>
      
      <!-- Estado vac√≠o para pedidos entregados -->
      <div id="catalogoEntregadosEmpty" class="empty-state-pedidos" style="display:none;">
        <span class="empty-icon">üéâ</span>
        <h3>No hay pedidos entregados</h3>
        <p>Los pedidos entregados del cat√°logo aparecer√°n aqu√≠</p>
      </div>
    </div>
  </div>
</section>

<!-- Modal de Detalle de Pedido Cat√°logo (simplificado) -->
<div id="detallePedidoModal" class="pedido-modal">
  <div class="modal-content pedido-detail-modal" role="dialog" aria-modal="true" aria-labelledby="detalleTitle">
    <div class="modal-header">
      <h2 id="detalleTitle">Detalle del Pedido <span id="pedidoIdDisplay">#12345</span></h2>
      <button class="close-modal" aria-label="Cerrar">√ó</button>
    </div>

    <div class="modal-body">
      <div class="detalle-grid" style="display:grid; grid-template-columns:1fr 320px; gap:14px;">
        <div>
          <div style="display:flex; align-items:center; gap:12px; margin-bottom:12px;">
            <div style="width:56px; height:56px; border-radius:8px; background:#222; display:flex; align-items:center; justify-content:center; color:#888;">üë§</div>
            <div>
              <div style="font-weight:700;" id="detailClienteNombre">-</div>
              <div style="color:#9aa3b2; font-size:0.9rem;" id="detailClienteTelefono">-</div>
              <div style="color:#9aa3b2; font-size:0.9rem;" id="detailClienteEmail">-</div>
            </div>
          </div>

          <div style="background:#111; padding:10px; border-radius:8px; margin-bottom:10px;">
            <strong>Direcci√≥n</strong>
            <div id="detailClienteDireccion" style="color:#cfcfcf; margin-top:6px;">-</div>
          </div>

          <div style="background:#111; padding:10px; border-radius:8px;">
            <h4 style="margin:0 0 8px 0;">Productos</h4>
            <div id="detailProductosList" style="display:flex; flex-direction:column; gap:8px;"></div>
          </div>
        </div>

        <aside>
          <div style="background:#111; padding:12px; border-radius:8px; margin-bottom:12px;">
            <div style="display:flex; justify-content:space-between; align-items:center;">
              <div><strong>Estado:</strong></div>
              <select id="detailEstadoSelect" class="form-select"></select>
            </div>
            <div style="margin-top:8px;">
              <div><strong>Pago:</strong></div>
              <select id="detailEstadoPagoSelect" class="form-select" style="width:100%; margin-top:6px;"></select>
              <input type="number" id="detailMontoRecibido" class="form-input" style="width:100%; margin-top:8px;" placeholder="Monto recibido"/>
              <div style="margin-top:6px; font-size:0.9rem; color:#9aa3b2;">
                Restante a pagar: <span id="detailRestante" style="font-weight:700; color:#cfcfcf; display:inline-block; margin-left:6px;">-</span>
              </div>
            </div>
            <div style="margin-top:10px; display:flex; gap:8px;">
              <button id="btnContactWhatsApp" class="btn-action whatsapp">üì±</button>
              <button id="btnContactEmail" class="btn-action email">üìß</button>
            </div>
            <div style="margin-top:10px;">
              <div style="display:flex; gap:6px; margin-top:6px;">
                <span class="badge" id="detailBadgePago">Sin se√±a</span>
                <span class="badge" id="detailBadgeMetodo">WhatsApp</span>
              </div>
            </div>
          </div>

          <div style="background:#111; padding:12px; border-radius:8px;">
            <div style="display:flex; flex-direction:column; gap:10px;">
              <div>
                <div style="color:#9aa3b2; font-size:0.9rem;">Solicitada</div>
                <div id="detailFechaSolicitada">-</div>
              </div>
              <div>
                <div style="color:#9aa3b2; font-size:0.9rem;">Producci√≥n</div>
                <div style="display:flex; gap:8px; align-items:center;">
                  <input type="date" id="detailFechaProduccion" class="form-input" />
                </div>
              </div>
              <div>
                <div style="color:#9aa3b2; font-size:0.9rem;">Confirmada</div>
                <input type="date" id="detailFechaConfirmada" class="form-input" />
              </div>
            </div>
            <div style="margin-top:12px;">
              <div style="display:flex; justify-content:space-between;">
                <div style="color:#9aa3b2;">Subtotal</div><div id="detailSubtotal">$0</div>
              </div>
              <div id="detailDescuentoRow" style="display:none; margin-top:6px; color:#9aa3b2;">
                <div>Descuento (<span id="detailDescuentoCodigo"></span>)</div>
                <div id="detailDescuento">-$0</div>
              </div>
              <div style="margin-top:8px; font-weight:700; font-size:1.05rem;">
                <div style="display:flex; justify-content:space-between;"><div>TOTAL</div><div id="detailTotal">$0</div></div>
              </div>
              <div style="margin-top:8px; color:#9aa3b2;">Tiempo: <span id="detailTiempo">0 min</span></div>
            </div>
          </div>

          <div id="comprobanteSection" style="display:none; margin-top:10px;">
            <div style="background:#111; padding:10px; border-radius:8px;">
              <div style="font-weight:700;">Comprobante</div>
              <img id="comprobanteImagen" src="" alt="Comprobante" style="width:100%; margin-top:8px; border-radius:6px;" />
              <button class="btn-secondary" id="btnDescargarComprobante" style="margin-top:8px;">Descargar</button>
            </div>
          </div>
        </aside>
      </div>

      <div style="margin-top:10px; color:#9aa3b2;" id="detailNotas">Sin notas adicionales</div>
    </div>

    <div class="modal-actions" style="display:flex; gap:8px; justify-content:flex-end; padding:12px 16px;">
      <button class="btn-secondary" id="btnCerrarDetalle">Cerrar</button>
      <button class="btn-danger" id="btnEliminarPedido">Eliminar</button>
      <button class="btn-primary" id="btnGuardarCambios">Guardar</button>
      <button class="btn-success" id="btnAsignarCalendario" style="display:none;">Asignar</button>
    </div>
  </div>
</div>
    <!-- Botones de acci√≥n (este bloque estaba duplicado y causaba que los botones del modal aparecieran en todas las p√°ginas) -->
    <!-- ...existing code... -->

<!-- Modal Calendario (simplificado) -->
<div id="calendarModal" class="calendar-modal" style="display: none;" aria-hidden="true">
  <div class="modal-content" role="dialog" aria-modal="true" style="max-width:1100px; width:95%;">
    <!-- Header -->
    <div class="modal-header" style="background: #252a32; padding: 16px; border-bottom: 1px solid #404040; display:flex; justify-content:space-between; align-items:center;">
      <div>
        <h3 style="color: #74b9ff; margin: 0; font-size:1.05rem;">Asignar Pedidos</h3>
        <div id="modalDateDisplay" style="color:#cfcfcf; font-size:0.9rem; margin-top:4px;"></div>
      </div>
      <button class="close-modal" aria-label="Cerrar" style="background:transparent; border:none; color:#cfcfcf; font-size:1.4rem; cursor:pointer;">√ó</button>
    </div>

    <!-- Body: 3 columnas -->
    <div class="modal-body" style="display:grid; grid-template-columns: 220px 1fr 320px; gap:16px; padding:16px;">

      <!-- Columna 1: Resumen compacto -->
      <div style="background:#1f2226; padding:12px; border-radius:8px;">
        <div style="color:#b0b0b0; font-size:0.85rem; margin-bottom:6px;">Tiempo total</div>
        <div id="dayTotalMin" style="color:#74b9ff; font-weight:700; font-size:1.1rem; margin-bottom:10px;">00:00:00</div>
        <div style="color:#b0b0b0; font-size:0.85rem; margin-bottom:6px;">Valor total</div>
        <div id="dayTotalMoney" style="color:#4CAF50; font-weight:700; font-size:1.1rem;">$0</div>

        <hr style="border:none; height:1px; background:#2a2a2a; margin:12px 0;">

        <div style="color:#b0b0b0; font-size:0.85rem; margin-bottom:6px;">Capacidad</div>
        <div style="background:#111; height:10px; border-radius:6px; overflow:hidden; margin-bottom:8px;">
          <div id="capacityFill" style="width:0%; height:100%; background:#4CAF50;"></div>
        </div>
        <div id="capacityText" style="color:#999; font-size:0.9rem;">0%</div>
      </div>

      <!-- Columna 2: Lista de pedidos (scroll) -->
      <div style="background:#111; padding:12px; border-radius:8px; max-height:420px; overflow:auto;">
        <h4 style="color:#cfcfcf; margin:0 0 8px 0; font-size:1rem;">Pedidos del d√≠a</h4>
        <div id="dayProductList" class="day-product-list"></div>
      </div>

      <!-- Columna 3: Formulario compacto para asignar nuevo pedido -->
      <div style="background:#1f2226; padding:12px; border-radius:8px;">
        <h4 style="color:#cfcfcf; margin:0 0 10px 0; font-size:0.95rem;">Nuevo pedido</h4>
        <div style="display:flex; flex-direction:column; gap:8px;">
          <label style="color:#b0b0b0; font-size:0.85rem;">Producto</label>
          <select id="modalProductSelect" class="form-input" style="padding:8px; border-radius:6px; background:#222; color:#e0e0e0; border:1px solid #333;"></select>

          <div style="display:flex; gap:8px;">
            <div style="flex:1;">
              <label style="color:#b0b0b0; font-size:0.85rem;">Cantidad</label>
              <input type="number" id="modalCantidad" value="1" min="1" class="form-input" style="width:100%; padding:8px; border-radius:6px; background:#222; color:#e0e0e0; border:1px solid #333;" />
            </div>
            <div style="width:100px;">
              <label style="color:#b0b0b0; font-size:0.85rem;">Se√±a ($)</label>
              <input type="number" id="modalSena" placeholder="0" class="form-input" style="width:100%; padding:8px; border-radius:6px; background:#222; color:#e0e0e0; border:1px solid #333;" />
            </div>
          </div>

          <div style="display:flex; align-items:center; gap:8px;">
            <input type="checkbox" id="modalPersonalizado" />
            <label for="modalPersonalizado" style="color:#b0b0b0;">Personalizado</label>
          </div>

          <label style="color:#b0b0b0; font-size:0.85rem;">Observaciones</label>
          <textarea id="modalObservaciones" rows="3" style="width:100%; padding:8px; border-radius:6px; background:#0f1112; color:#e0e0e0; border:1px solid #333;"></textarea>

          <div style="display:flex; gap:8px; margin-top:8px;">
            <button id="modalCancelBtn" style="flex:1; padding:10px; background:#757575; color:#fff; border:none; border-radius:8px; cursor:pointer;">Cancelar</button>
            <button id="modalSaveBtn" style="flex:1; padding:10px; background:#4CAF50; color:#fff; border:none; border-radius:8px; cursor:pointer;">Asignar</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- SECCI√ìN MI CUENTA -->
<section id="mi-cuenta-section" class="section" hidden>
  <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
    <div>
      <h1 class="section-title" style="color: #cfcfcf; font-size:1.5rem; margin-bottom:5px;">Mi Cuenta</h1>
      <p style="color: #9aa3b2; font-size:0.95rem;">Informaci√≥n del usuario y configuraciones del sistema</p>
    </div>
    <button id="btnCerrarSesion">
      <span style="font-size: 0.8rem;">üö™</span>
      Cerrar Sesi√≥n
    </button>
  </div>

  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 30px;">
    <!-- Informaci√≥n del Usuario -->
    <div class="account-card" style="background: #1e2226; padding: 24px; border-radius: 12px; border: 1px solid #333;">
      <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 20px;">
        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white;">
          üë§
        </div>
        <div>
          <h3 style="color: #f8fafc; margin: 0; font-size: 1.2rem;">Administrador KOND</h3>
          <p style="color: #94a3b8; margin: 4px 0 0 0; font-size: 0.9rem;">admin1</p>
          <span style="background: #059669; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">Activo</span>
        </div>
      </div>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
        <div>
          <div style="color: #94a3b8; font-size: 0.85rem; margin-bottom: 4px;">√öltimo acceso</div>
          <div style="color: #f8fafc; font-weight: 500;" id="ultimoAcceso">Hoy, 14:30</div>
        </div>
        <div>
          <div style="color: #94a3b8; font-size: 0.85rem; margin-bottom: 4px;">Rol</div>
          <div style="color: #f8fafc; font-weight: 500;">Super Admin</div>
        </div>
        <div>
          <div style="color: #94a3b8; font-size: 0.85rem; margin-bottom: 4px;">Permisos</div>
          <div style="color: #f8fafc; font-weight: 500;">Completos</div>
        </div>
        <div>
          <div style="color: #94a3b8; font-size: 0.85rem; margin-bottom: 4px;">Sesiones</div>
          <div style="color: #f8fafc; font-weight: 500;" id="sesionesActivas">1 activa</div>
        </div>
      </div>
    </div>

    <!-- Estad√≠sticas del Sistema -->
    <div class="system-stats" style="background: #1e2226; padding: 24px; border-radius: 12px; border: 1px solid #333;">
      <h3 style="color: #f8fafc; margin: 0 0 16px 0; font-size: 1.1rem;">üìä Resumen del Sistema</h3>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
        <div style="text-align: center;">
          <div style="color: #3b82f6; font-size: 1.8rem; font-weight: 700;" id="totalProductos">0</div>
          <div style="color: #94a3b8; font-size: 0.85rem;">Productos</div>
        </div>
        <div style="text-align: center;">
          <div style="color: #10b981; font-size: 1.8rem; font-weight: 700;" id="totalPedidos">0</div>
          <div style="color: #94a3b8; font-size: 0.85rem;">Pedidos</div>
        </div>
        <div style="text-align: center;">
          <div style="color: #f59e0b; font-size: 1.8rem; font-weight: 700;" id="totalClientes">0</div>
          <div style="color: #94a3b8; font-size: 0.85rem;">Clientes</div>
        </div>
        <div style="text-align: center;">
          <div style="color: #8b5cf6; font-size: 1.8rem; font-weight: 700;" id="balanceTotal">$0</div>
          <div style="color: #94a3b8; font-size: 0.85rem;">Balance</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Informaci√≥n del Sistema -->
  <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px;">
    <!-- Actividad Reciente -->
    <div class="activity-feed" style="background: #1e2226; padding: 24px; border-radius: 12px; border: 1px solid #333;">
      <h3 style="color: #f8fafc; margin: 0 0 16px 0; font-size: 1.1rem;">üïí Actividad Reciente</h3>
      
      <div id="actividadReciente" style="max-height: 300px; overflow-y: auto;">
        <!-- Se llenar√° din√°micamente -->
      </div>
    </div>

    <!-- Configuraciones R√°pidas -->
    <div class="quick-settings" style="background: #1e2226; padding: 24px; border-radius: 12px; border: 1px solid #333;">
      <h3 style="color: #f8fafc; margin: 0 0 16px 0; font-size: 1.1rem;">‚öôÔ∏è Configuraciones</h3>
      
      <div style="display: flex; flex-direction: column; gap: 12px;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <span style="color: #cbd5e1; font-size: 0.9rem;">Tema oscuro</span>
          <input type="checkbox" id="toggleTemaOscuro" checked style="transform: scale(1.2);">
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <span style="color: #cbd5e1; font-size: 0.9rem;">Notificaciones</span>
          <input type="checkbox" id="toggleNotificaciones" checked style="transform: scale(1.2);">
        </div>
        
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <span style="color: #cbd5e1; font-size: 0.9rem;">Sonidos</span>
          <input type="checkbox" id="toggleSonidos" style="transform: scale(1.2);">
        </div>
        
        <hr style="border: none; height: 1px; background: #374151; margin: 8px 0;">
        
        <button class="btn-secondary" style="width: 100%; padding: 8px; background: #374151; color: #cbd5e1; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
          üîÑ Exportar Datos
        </button>
        
        <button class="btn-secondary" style="width: 100%; padding: 8px; background: #374151; color: #cbd5e1; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
          üßπ Limpiar Cache
        </button>
        
        <button class="btn-danger" style="width: 100%; padding: 8px; background: #dc2626; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">
          ‚ö†Ô∏è Reset Sistema
        </button>
      </div>
    </div>
  </div>
</section>

  <div id="notification" class="notification" role="status" aria-live="polite"></div>





 <!-- Modal Toggle Visibilidad -->
<div id="toggleVisibilityModal" class="modal" aria-hidden="true" style="display: none;">
  <div class="modal-content" role="dialog" style="max-width: 500px; margin: auto;">
    <h3 style="color:#74b9ff; margin-bottom:16px;">
      <span id="toggleAction">Ocultar</span> Producto
    </h3>
    <p style="color:#cfcfcf; margin-bottom:12px;">
  <strong id="toggleProductName" style="color:#0984e3;"></strong>
    </p>
    <p style="color:#b0b0b0; font-size:0.9rem; margin-bottom:24px;" id="toggleDescription">
      Este producto dejar√° de mostrarse en la secci√≥n Productos y en el Cat√°logo p√∫blico.
    </p>
    <div style="display:flex; gap:12px; justify-content:flex-end;">
      <button id="toggleModalCancel" class="primary" style="background:#757575;">Cancelar</button>
      <button id="toggleModalConfirm" class="secondary" style="min-width: 160px;">
        <span id="toggleBtnText">üëÅÔ∏è‚Äçüó®Ô∏è Ocultar</span>
      </button>
    </div>
  <button class="close-modal" data-action="close-modal" data-target="toggleVisibilityModal" aria-label="Cerrar">√ó</button>
  </div>
</div>
<!-- Modal Eliminar Producto -->
<div id="deleteModal" class="modal" aria-hidden="true" style="display: none;">
  <div class="modal-content" role="dialog" style="max-width: 500px; margin: auto;">
    <h3 style="color:#74b9ff; margin-bottom:16px;">
      Eliminar Producto
    </h3>
    <p style="color:#cfcfcf; margin-bottom:12px;">
  <strong id="deleteProductName" style="color:#0984e3;"></strong>
    </p>
    <p style="color:#b0b0b0; font-size:0.9rem; margin-bottom:24px;" id="deleteDescription">
      Esta acci√≥n eliminar√° permanentemente el producto de la base de datos.
    </p>
    <div style="display:flex; gap:12px; justify-content:flex-end;">
      <button id="deleteModalCancel" class="primary" style="background:#757575;">Cancelar</button>
      <button id="deleteModalConfirm" class="secondary" style="min-width: 160px;">
        üóëÔ∏è Eliminar
      </button>
    </div>
  <button class="close-modal" data-action="close-modal" data-target="deleteModal" aria-label="Cerrar">√ó</button>
  </div>
</div>
  <!-- Scripts -->
<!-- Scripts -->
<script src="js/utils.js"></script>

<script src="js/navigations.js"></script>
<script src="js/calculations.js"></script>
<script src="js/filters.js"></script>
<script src="js/products.js"></script>
<script src="js/metrics.js"></script>
<script src="js/database.js"></script>
<script src="js/pedidos.js"></script>
<script src="js/export.js"></script>
<script src="js/theme.js"></script>
<script src="js/mi-cuenta.js"></script>

<script src="js/sidebar.js"></script>
<script src="js/main.js"></script>
<script src="js/modals.js"></script>
<script src="js/calendar.js"></script>

<script src="js/finanzas.js"></script>
<script src="js/pedidos-catalogo.js"></script>
<script src="js/promo-engine.js"></script>
<script src="js/marketing.js"></script>

<script>
// Funci√≥n para abrir el cat√°logo p√∫blico
function openPublicCatalog() {
  // Siempre usar la versi√≥n de Next.js (con redirect configurado)
  window.open('/catalog', '_blank', 'noopener,noreferrer')
}

// Custom Alert Dialog System
function showCustomAlert(title, message, type = 'info', callback = null) {
  const alertModal = document.createElement('div');
  alertModal.className = 'custom-alert-modal';
  alertModal.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.3s ease;
  `;
  
  const alertContent = document.createElement('div');
  alertContent.style.cssText = `
    background: linear-gradient(145deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    padding: 32px;
    border-radius: 16px;
    max-width: 400px;
    width: 90%;
    border: 1px solid var(--border-input);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
    text-align: center;
    position: relative;
    animation: slideInFromTop 0.3s ease;
  `;
  
  const colorMap = {
    success: 'var(--accent-success)',
    error: 'var(--accent-danger)',
    warning: 'var(--accent-warning)',
    info: 'var(--accent-primary)'
  };
  
  alertContent.innerHTML = `
    <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: ${colorMap[type]}; border-radius: 16px 16px 0 0;"></div>
    <div style="font-size: 2rem; margin-bottom: 16px;">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'}</div>
    <h3 style="color: var(--text-primary); margin: 0 0 12px 0; font-size: 1.4rem; font-weight: 700;">${title}</h3>
    <p style="color: var(--text-secondary); margin: 0 0 24px 0; line-height: 1.5;">${message}</p>
    <button onclick="closeCustomAlert()" style="
      background: ${colorMap[type]};
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      min-width: 100px;
      transition: all 0.2s ease;
    " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
      Aceptar
    </button>
  `;
  
  alertModal.appendChild(alertContent);
  document.body.appendChild(alertModal);
  
  window.closeCustomAlert = function() {
    alertModal.remove();
    if (callback) callback();
  };
  
  // Auto close for success messages
  if (type === 'success' && callback) {
    setTimeout(() => {
      closeCustomAlert();
    }, 2000);
  }
}

// Custom Confirm Dialog
function showCustomConfirm(title, message, onConfirm, onCancel = null) {
  const confirmModal = document.createElement('div');
  confirmModal.className = 'custom-confirm-modal';
  confirmModal.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.3s ease;
  `;
  
  const confirmContent = document.createElement('div');
  confirmContent.style.cssText = `
    background: linear-gradient(145deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    padding: 32px;
    border-radius: 16px;
    max-width: 400px;
    width: 90%;
    border: 1px solid var(--border-input);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
    text-align: center;
    position: relative;
    animation: slideInFromTop 0.3s ease;
  `;
  
  confirmContent.innerHTML = `
    <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: var(--accent-warning); border-radius: 16px 16px 0 0;"></div>
    <div style="font-size: 2rem; margin-bottom: 16px;">ü§î</div>
    <h3 style="color: var(--text-primary); margin: 0 0 12px 0; font-size: 1.4rem; font-weight: 700;">${title}</h3>
    <p style="color: var(--text-secondary); margin: 0 0 24px 0; line-height: 1.5;">${message}</p>
    <div style="display: flex; gap: 12px; justify-content: center;">
      <button onclick="closeCustomConfirm(false)" style="
        background: var(--bg-tertiary);
        color: var(--text-secondary);
        padding: 12px 24px;
        border: 1px solid var(--border-input);
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        min-width: 100px;
        transition: all 0.2s ease;
      " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
        Cancelar
      </button>
      <button onclick="closeCustomConfirm(true)" style="
        background: var(--accent-danger);
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        min-width: 100px;
        transition: all 0.2s ease;
      " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
        Confirmar
      </button>
    </div>
  `;
  
  confirmModal.appendChild(confirmContent);
  document.body.appendChild(confirmModal);
  
  window.closeCustomConfirm = function(confirmed) {
    confirmModal.remove();
    if (confirmed && onConfirm) {
      onConfirm();
    } else if (!confirmed && onCancel) {
      onCancel();
    }
  };
}
</script>
</body>
</html>